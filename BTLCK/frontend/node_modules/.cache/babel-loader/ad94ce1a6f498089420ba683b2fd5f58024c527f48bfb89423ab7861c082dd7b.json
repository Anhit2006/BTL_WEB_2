{"ast":null,"code":"var _jsxFileName = \"D:\\\\BTL_WEB_1\\\\BTLCK\\\\BTLCK\\\\frontend\\\\src\\\\pages\\\\Orders.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useMemo } from 'react';\nimport { orderAPI, customerAPI, productAPI } from '../services/api';\nimport './Orders.css';\n\n// hiển thị  khi loading\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst LoadingSpinner = () => /*#__PURE__*/_jsxDEV(\"div\", {\n  className: \"spinner-container\",\n  style: {\n    textAlign: 'center',\n    padding: '50px'\n  },\n  children: /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"spinner\",\n    children: \"\\u0110ang t\\u1EA3i...\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 8,\n    columnNumber: 9\n  }, this)\n}, void 0, false, {\n  fileName: _jsxFileName,\n  lineNumber: 7,\n  columnNumber: 5\n}, this);\n_c = LoadingSpinner;\nconst Orders = () => {\n  _s();\n  var _orderDetails$items;\n  const [orders, setOrders] = useState([]);\n  const [customers, setCustomers] = useState([]);\n  const [products, setProducts] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [currentKeyword, setCurrentKeyword] = useState('');\n  const [filterStatus, setFilterStatus] = useState('');\n  const [filterStartDate, setFilterStartDate] = useState('');\n  const [filterEndDate, setFilterEndDate] = useState('');\n  const [showModal, setShowModal] = useState(false);\n  const [orderDetails, setOrderDetails] = useState(null);\n  const [formData, setFormData] = useState({\n    ma_kh: '',\n    items: [{\n      ma_sp: '',\n      so_luong: 1\n    }],\n    trang_thai: 'Chờ xử lý'\n  });\n  const [alert, setAlert] = useState({\n    type: '',\n    message: ''\n  });\n\n  //  Load Data \n  const loadData = async () => {\n    setLoading(true);\n    try {\n      await Promise.all([loadOrders({}), loadCustomers(), loadProducts()]);\n    } catch (error) {\n      console.error('Lỗi khi tải dữ liệu ban đầu:', error);\n      showAlert('error', 'Lỗi khi tải dữ liệu ban đầu.');\n    } finally {\n      setLoading(false);\n    }\n  };\n  useEffect(() => {\n    loadData();\n  }, []);\n\n  //  LỌC KHI NHẤN NÚT\n  const handleApplyFilter = async () => {\n    setLoading(true);\n    const params = {\n      keyword: currentKeyword,\n      status: filterStatus,\n      startDate: filterStartDate,\n      endDate: filterEndDate\n    };\n    await loadOrders(params);\n    setLoading(false);\n  };\n  const handleResetFilter = async () => {\n    setLoading(true);\n    setCurrentKeyword('');\n    setFilterStatus('');\n    setFilterStartDate('');\n    setFilterEndDate('');\n    await loadOrders({});\n    setLoading(false);\n  };\n  const loadOrders = async (params = {}) => {\n    try {\n      const response = await orderAPI.getAll(params);\n      if (response.data.success) {\n        setOrders(response.data.data);\n      }\n    } catch (error) {\n      showAlert('error', 'Lỗi khi tải danh sách đơn hàng');\n    }\n  };\n  const loadCustomers = async () => {\n    try {\n      const response = await customerAPI.getAll();\n      if (response.data.success) {\n        setCustomers(response.data.data);\n      }\n    } catch (error) {\n      console.error('Error loading customers:', error);\n    }\n  };\n  const loadProducts = async () => {\n    try {\n      // Lọc sản phẩm đang hoạt động/có sẵn\n      const response = await productAPI.getAll('', false);\n      if (response.data.success) {\n        setProducts(response.data.data.filter(p => p.trang_thai === 1));\n      }\n    } catch (error) {\n      console.error('Error loading products:', error);\n    }\n  };\n  const showAlert = (type, message) => {\n    setAlert({\n      type,\n      message\n    });\n    setTimeout(() => setAlert({\n      type: '',\n      message: ''\n    }), 3000);\n  };\n\n  //  Modal & Form Logic \n\n  const handleOpenModal = () => {\n    setFormData({\n      ma_kh: '',\n      items: [{\n        ma_sp: '',\n        so_luong: 1\n      }],\n      trang_thai: 'Chờ xử lý'\n    });\n    setOrderDetails(null);\n    setShowModal(true);\n  };\n  const handleCloseModal = () => {\n    setShowModal(false);\n    setOrderDetails(null);\n    setFormData({\n      ma_kh: '',\n      items: [{\n        ma_sp: '',\n        so_luong: 1\n      }],\n      trang_thai: 'Chờ xử lý'\n    });\n  };\n  const handleViewDetails = async order => {\n    try {\n      const response = await orderAPI.getById(order.ma_dh);\n      if (response.data.success) {\n        setOrderDetails(response.data.data);\n        setShowModal(true);\n      }\n    } catch (error) {\n      showAlert('error', 'Lỗi khi tải chi tiết đơn hàng');\n    }\n  };\n\n  //  Product Item Logic \n\n  const addProductItem = () => {\n    setFormData({\n      ...formData,\n      items: [...formData.items, {\n        ma_sp: '',\n        so_luong: 1\n      }]\n    });\n  };\n  const removeProductItem = index => {\n    const newItems = formData.items.filter((_, i) => i !== index);\n    setFormData({\n      ...formData,\n      items: newItems\n    });\n  };\n  const updateProductItem = (index, field, value) => {\n    const newItems = [...formData.items];\n\n    // Chuyển đổi số lượng sang int\n    if (field === 'so_luong') {\n      const numValue = parseInt(value);\n      newItems[index][field] = numValue < 1 ? 1 : numValue;\n    } else {\n      newItems[index][field] = value;\n    }\n    setFormData({\n      ...formData,\n      items: newItems\n    });\n  };\n\n  //  Submit & Delete \n\n  const handleSubmit = async e => {\n    e.preventDefault();\n\n    // Validate\n    if (!formData.ma_kh) {\n      showAlert('error', 'Vui lòng chọn khách hàng.');\n      return;\n    }\n    const validItems = formData.items.filter(item => item.ma_sp && item.so_luong > 0);\n    if (validItems.length === 0) {\n      showAlert('error', 'Vui lòng thêm ít nhất một sản phẩm hợp lệ.');\n      return;\n    }\n    try {\n      // Chuẩn bị data, chỉ gửi items hợp lệ\n      const dataToSubmit = {\n        ...formData,\n        items: validItems\n      };\n      await orderAPI.create(dataToSubmit);\n      showAlert('success', 'Tạo đơn hàng thành công!');\n      handleCloseModal();\n      loadOrders();\n    } catch (error) {\n      var _error$response, _error$response$data;\n      showAlert('error', ((_error$response = error.response) === null || _error$response === void 0 ? void 0 : (_error$response$data = _error$response.data) === null || _error$response$data === void 0 ? void 0 : _error$response$data.error) || 'Có lỗi xảy ra. Vui lòng kiểm tra tồn kho.');\n    }\n  };\n\n  // Cancel\n  const handleCancelOrder = async order => {\n    if (order.trang_thai === 'Đã hủy' || order.trang_thai === 'Hoàn thành') {\n      // ⭐ SỬA: Bỏ 'Đã giao'\n      showAlert('error', `Không thể hủy đơn hàng ${order.ma_dh} vì trạng thái là \"${order.trang_thai}\".`);\n      return;\n    }\n    if (window.confirm(`Bạn có chắc muốn HỦY đơn hàng ${order.ma_dh}?\\n\\nThao tác này sẽ cập nhật trạng thái đơn hàng và HOÀN LẠI số lượng sản phẩm vào tồn kho.`)) {\n      try {\n        await orderAPI.cancel(order.ma_dh);\n        showAlert('success', `Đã hủy đơn hàng #${order.ma_dh} thành công! Tồn kho đã được bù trừ.`);\n        loadOrders();\n      } catch (error) {\n        var _error$response2, _error$response2$data;\n        console.error('Lỗi khi hủy đơn hàng:', error);\n        showAlert('error', ((_error$response2 = error.response) === null || _error$response2 === void 0 ? void 0 : (_error$response2$data = _error$response2.data) === null || _error$response2$data === void 0 ? void 0 : _error$response2$data.error) || 'Lỗi khi hủy đơn hàng. Vui lòng kiểm tra Server.');\n      }\n    }\n  };\n  // ⭐ (Completed)\n  const handleCompleteOrder = async order => {\n    if (order.trang_thai === 'Đã hủy' || order.trang_thai === 'Hoàn thành') {\n      showAlert('error', `Không thể hoàn thành đơn hàng ${order.ma_dh} vì trạng thái là \"${order.trang_thai}\".`);\n      return;\n    }\n    if (window.confirm(`Bạn có chắc muốn HOÀN THÀNH đơn hàng ${order.ma_dh}?\\n\\nThao tác này sẽ xác nhận đơn hàng đã được giao.`)) {\n      try {\n        await orderAPI.complete(order.ma_dh);\n        showAlert('success', `Đơn hàng #${order.ma_dh} đã được chuyển sang trạng thái Hoàn thành!`);\n        loadOrders();\n      } catch (error) {\n        var _error$response3, _error$response3$data;\n        console.error('Lỗi khi hoàn thành đơn hàng:', error);\n        showAlert('error', ((_error$response3 = error.response) === null || _error$response3 === void 0 ? void 0 : (_error$response3$data = _error$response3.data) === null || _error$response3$data === void 0 ? void 0 : _error$response3$data.error) || 'Lỗi khi hoàn thành đơn hàng. Vui lòng kiểm tra Server.');\n      }\n    }\n  };\n  // ⭐ HÀM MỚI: Xử lý thay đổi trạng thái từ Dropdown\n  const handleStatusChange = async (order, newStatus) => {\n    // Tránh cập nhật nếu trạng thái không thay đổi\n    if (order.trang_thai === newStatus) return;\n\n    // Xác nhận và xử lý theo trạng thái mới\n    if (newStatus === 'Hoàn thành') {\n      handleCompleteOrder(order);\n    } else if (newStatus === 'Đã hủy') {\n      handleCancelOrder(order);\n    } else if (newStatus === 'Chờ xử lý' && order.trang_thai !== 'Chờ xử lý') {\n      // Nếu muốn chuyển lại về \"Chờ xử lý\" (Cần logic API tương ứng trên server)\n      if (window.confirm(`Bạn có chắc muốn chuyển đơn hàng #${order.ma_dh} về trạng thái \"Chờ xử lý\" không?`)) {\n        try {\n          // Giả định API của bạn có endpoint để chuyển trạng thái về \"Chờ xử lý\"\n          // await orderAPI.updateStatus(order.ma_dh, newStatus); \n          showAlert('success', `Đơn hàng #${order.ma_dh} đã được chuyển về trạng thái Chờ xử lý!`);\n          loadOrders();\n        } catch (error) {\n          var _error$response4, _error$response4$data;\n          showAlert('error', ((_error$response4 = error.response) === null || _error$response4 === void 0 ? void 0 : (_error$response4$data = _error$response4.data) === null || _error$response4$data === void 0 ? void 0 : _error$response4$data.error) || 'Lỗi khi cập nhật trạng thái.');\n        }\n      }\n    }\n  };\n  // Utility Functions \n\n  const getCustomerName = ma_kh => {\n    const customer = customers.find(c => c.ma_kh === ma_kh);\n    return customer ? customer.ho_ten : `(Mã KH: ${ma_kh})`;\n  };\n\n  //  Badge trạng thái\n  const getStatusBadge = trang_thai => {\n    // Đảm bảo trạng thái luôn là chuỗi và chuẩn hóa\n    const normalizedStatus = (trang_thai || 'Chờ xử lý').trim();\n    switch (normalizedStatus) {\n      case 'Hoàn thành':\n        return /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"badge badge-success\",\n          children: normalizedStatus\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 285,\n          columnNumber: 20\n        }, this);\n      case 'Chờ xử lý':\n        return /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"badge badge-warning\",\n          children: normalizedStatus\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 287,\n          columnNumber: 20\n        }, this);\n      case 'Đã hủy':\n        return /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"badge badge-danger\",\n          children: normalizedStatus\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 289,\n          columnNumber: 20\n        }, this);\n      default:\n        return /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"badge badge-info\",\n          children: \"Ch\\u1EDD x\\u1EED l\\xFD\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 291,\n          columnNumber: 20\n        }, this);\n    }\n  };\n\n  // Tính toán tổng tiền tạm thời cho form tạo đơn hàng \n  const totalAmount = useMemo(() => {\n    return formData.items.reduce((total, item) => {\n      const product = products.find(p => p.ma_sp === item.ma_sp);\n      const price = product ? parseInt(product.gia_ban) : 0;\n      return total + price * item.so_luong;\n    }, 0);\n  }, [formData.items, products]);\n\n  //  Render \n  if (loading) {\n    return /*#__PURE__*/_jsxDEV(LoadingSpinner, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 306,\n      columnNumber: 16\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"orders-page\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"card\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"card-header\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          children: \"\\uD83D\\uDED2 Qu\\u1EA3n L\\xFD \\u0110\\u01A1n H\\xE0ng\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 313,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"btn btn-primary\",\n          onClick: handleOpenModal,\n          children: \"+ T\\u1EA1o \\u0110\\u01A1n H\\xE0ng M\\u1EDBi\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 314,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 312,\n        columnNumber: 17\n      }, this), alert.message && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: `alert alert-${alert.type}`,\n        children: alert.message\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 320,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"filter-bar order-filter-bar\",\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          placeholder: \"T\\xECm ki\\u1EBFm theo m\\xE3, kh\\xE1ch h\\xE0ng...\",\n          value: currentKeyword,\n          onChange: e => setCurrentKeyword(e.target.value),\n          className: \"form-control search-input\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 326,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n          value: filterStatus,\n          onChange: e => setFilterStatus(e.target.value),\n          className: \"form-control filter-select\",\n          style: {\n            width: '150px'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"\",\n            children: \"-- Tr\\u1EA1ng th\\xE1i --\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 341,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"Ch\\u1EDD x\\u1EED l\\xFD\",\n            children: \"Ch\\u1EDD x\\u1EED l\\xFD\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 342,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"Ho\\xE0n th\\xE0nh\",\n            children: \"Ho\\xE0n th\\xE0nh\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 343,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"\\u0110\\xE3 h\\u1EE7y\",\n            children: \"\\u0110\\xE3 h\\u1EE7y\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 344,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 335,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"date\",\n          value: filterStartDate,\n          onChange: e => setFilterStartDate(e.target.value),\n          className: \"form-control filter-date\",\n          title: \"Ng\\xE0y b\\u1EAFt \\u0111\\u1EA7u\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 348,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"date\",\n          value: filterEndDate,\n          onChange: e => setFilterEndDate(e.target.value),\n          className: \"form-control filter-date\",\n          title: \"Ng\\xE0y k\\u1EBFt th\\xFAc\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 355,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"btn btn-primary\",\n          onClick: handleApplyFilter,\n          style: {\n            marginLeft: '10px'\n          },\n          children: \"\\uD83D\\uDD0E L\\u1ECDc\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 363,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"btn btn-secondary\",\n          onClick: handleResetFilter,\n          style: {\n            marginLeft: '10px'\n          },\n          children: \"\\uD83D\\uDD04 Reset\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 366,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 325,\n        columnNumber: 1\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"table-container\",\n        children: /*#__PURE__*/_jsxDEV(\"table\", {\n          children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n            children: /*#__PURE__*/_jsxDEV(\"tr\", {\n              children: [/*#__PURE__*/_jsxDEV(\"th\", {\n                children: \"M\\xE3 \\u0110H\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 375,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                children: \"Kh\\xE1ch H\\xE0ng\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 376,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                children: \"Th\\u1EDDi Gian\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 377,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                children: \"S\\u1ED1 L\\u01B0\\u1EE3ng SP\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 378,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                children: \"T\\u1ED5ng Ti\\u1EC1n\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 379,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                children: \"Tr\\u1EA1ng Th\\xE1i\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 380,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                children: \"Thao T\\xE1c\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 381,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 374,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 373,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n            children: orders.length === 0 ? /*#__PURE__*/_jsxDEV(\"tr\", {\n              children: /*#__PURE__*/_jsxDEV(\"td\", {\n                colSpan: \"7\",\n                style: {\n                  textAlign: 'center',\n                  padding: '2rem'\n                },\n                children: \"Kh\\xF4ng c\\xF3 \\u0111\\u01A1n h\\xE0ng n\\xE0o\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 387,\n                columnNumber: 37\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 386,\n              columnNumber: 33\n            }, this) : orders.map(order => /*#__PURE__*/_jsxDEV(\"tr\", {\n              children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                children: order.ma_dh\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 394,\n                columnNumber: 41\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                children: order.ten_khach_hang || getCustomerName(order.ma_kh)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 396,\n                columnNumber: 41\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                children: new Date(order.ngay_mua).toLocaleString('vi-VN')\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 398,\n                columnNumber: 41\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                children: order.tong_so_luong || order.item_count || 0\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 400,\n                columnNumber: 41\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                children: [parseInt(order.tong_tien || 0).toLocaleString('vi-VN'), \" \\u0111\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 402,\n                columnNumber: 41\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                children: getStatusBadge(order.trang_thai)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 404,\n                columnNumber: 41\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                children: /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"action-buttons\",\n                  children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                    className: \"btn btn-secondary btn-sm\",\n                    onClick: () => handleViewDetails(order),\n                    children: \"Chi Ti\\u1EBFt\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 410,\n                    columnNumber: 49\n                  }, this), order.trang_thai === 'Chờ xử lý' && /*#__PURE__*/_jsxDEV(\"button\", {\n                    className: \"btn btn-success btn-sm\",\n                    onClick: () => handleCompleteOrder(order),\n                    children: \"Ho\\xE0n th\\xE0nh\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 418,\n                    columnNumber: 53\n                  }, this), order.trang_thai === 'Chờ xử lý' && /*#__PURE__*/_jsxDEV(\"button\", {\n                    className: \"btn btn-danger btn-sm\",\n                    onClick: () => handleCancelOrder(order),\n                    children: \"H\\u1EE7y\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 429,\n                    columnNumber: 53\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 409,\n                  columnNumber: 45\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 408,\n                columnNumber: 41\n              }, this)]\n            }, order.ma_dh, true, {\n              fileName: _jsxFileName,\n              lineNumber: 392,\n              columnNumber: 37\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 384,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 372,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 371,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 311,\n      columnNumber: 13\n    }, this), showModal && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"modal-overlay\",\n      onClick: handleCloseModal,\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: `modal ${orderDetails ? 'modal-details' : 'modal-form'}`,\n        onClick: e => e.stopPropagation(),\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"modal-header\",\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            children: orderDetails ? `Chi Tiết Đơn Hàng #${orderDetails.ma_dh}` : 'Tạo Đơn Hàng Mới'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 452,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"close-btn\",\n            onClick: handleCloseModal,\n            children: \"\\xD7\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 453,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 451,\n          columnNumber: 25\n        }, this), orderDetails ?\n        /*#__PURE__*/\n        // Render Chi Tiết Đơn Hàng\n        _jsxDEV(\"div\", {\n          className: \"order-details\",\n          children: [/*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"detail-row\",\n            children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n              children: \"Kh\\xE1ch H\\xE0ng:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 459,\n              columnNumber: 59\n            }, this), \" \", getCustomerName(orderDetails.ma_kh)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 459,\n            columnNumber: 33\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"detail-row\",\n            children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n              children: \"Th\\u1EDDi Gian:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 460,\n              columnNumber: 59\n            }, this), \" \", new Date(orderDetails.ngay_mua).toLocaleString('vi-VN')]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 460,\n            columnNumber: 33\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"detail-row\",\n            children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n              children: \"Tr\\u1EA1ng Th\\xE1i:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 461,\n              columnNumber: 59\n            }, this), \" \", getStatusBadge(orderDetails.trang_thai)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 461,\n            columnNumber: 33\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"detail-section table-container\",\n            children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n              style: {\n                marginBottom: '1rem',\n                marginTop: '1rem',\n                color: '#457b9d'\n              },\n              children: \"Danh S\\xE1ch S\\u1EA3n Ph\\u1EA9m\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 464,\n              columnNumber: 37\n            }, this), /*#__PURE__*/_jsxDEV(\"table\", {\n              children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n                children: /*#__PURE__*/_jsxDEV(\"tr\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"th\", {\n                    children: \"S\\u1EA3n Ph\\u1EA9m\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 468,\n                    columnNumber: 49\n                  }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                    style: {\n                      width: '100px'\n                    },\n                    children: \"S\\u1ED1 L\\u01B0\\u1EE3ng\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 469,\n                    columnNumber: 49\n                  }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                    children: \"\\u0110\\u01A1n Gi\\xE1\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 470,\n                    columnNumber: 49\n                  }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                    children: \"Th\\xE0nh Ti\\u1EC1n\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 471,\n                    columnNumber: 49\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 467,\n                  columnNumber: 45\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 466,\n                columnNumber: 41\n              }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n                children: (_orderDetails$items = orderDetails.items) === null || _orderDetails$items === void 0 ? void 0 : _orderDetails$items.map((item, index) => /*#__PURE__*/_jsxDEV(\"tr\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                    children: item.ten_sp || item.ma_sp\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 477,\n                    columnNumber: 53\n                  }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                    style: {\n                      textAlign: 'center'\n                    },\n                    children: item.so_luong\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 478,\n                    columnNumber: 53\n                  }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                    children: [parseInt(item.don_gia).toLocaleString('vi-VN'), \" \\u0111\"]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 479,\n                    columnNumber: 53\n                  }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                    children: [parseInt(item.thanh_tien).toLocaleString('vi-VN'), \" \\u0111\"]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 480,\n                    columnNumber: 53\n                  }, this)]\n                }, index, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 476,\n                  columnNumber: 49\n                }, this))\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 474,\n                columnNumber: 41\n              }, this), /*#__PURE__*/_jsxDEV(\"tfoot\", {\n                children: /*#__PURE__*/_jsxDEV(\"tr\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                    colSpan: \"3\",\n                    style: {\n                      textAlign: 'right',\n                      fontWeight: 'bold'\n                    },\n                    children: \"T\\u1ED5ng Ti\\u1EC1n:\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 486,\n                    columnNumber: 49\n                  }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                    style: {\n                      fontWeight: 'bold',\n                      fontSize: '1.1rem'\n                    },\n                    children: [parseInt(orderDetails.tong_tien).toLocaleString('vi-VN'), \" \\u0111\"]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 487,\n                    columnNumber: 49\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 485,\n                  columnNumber: 45\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 484,\n                columnNumber: 41\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 465,\n              columnNumber: 37\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 463,\n            columnNumber: 33\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"modal-footer\",\n            children: /*#__PURE__*/_jsxDEV(\"button\", {\n              type: \"button\",\n              className: \"btn btn-secondary\",\n              onClick: handleCloseModal,\n              children: \"\\u0110\\xF3ng\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 495,\n              columnNumber: 37\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 494,\n            columnNumber: 33\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 458,\n          columnNumber: 29\n        }, this) :\n        /*#__PURE__*/\n        // Render Form Tạo Mới\n        _jsxDEV(\"form\", {\n          onSubmit: handleSubmit,\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"form-group\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              children: \"Kh\\xE1ch H\\xE0ng *\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 504,\n              columnNumber: 37\n            }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n              required: true,\n              value: formData.ma_kh,\n              onChange: e => setFormData({\n                ...formData,\n                ma_kh: e.target.value\n              }),\n              children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"\",\n                children: \"-- Ch\\u1ECDn kh\\xE1ch h\\xE0ng --\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 510,\n                columnNumber: 41\n              }, this), customers.map(customer => /*#__PURE__*/_jsxDEV(\"option\", {\n                value: customer.ma_kh,\n                children: customer.ho_ten\n              }, customer.ma_kh, false, {\n                fileName: _jsxFileName,\n                lineNumber: 512,\n                columnNumber: 45\n              }, this))]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 505,\n              columnNumber: 37\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 503,\n            columnNumber: 33\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"form-group product-list-group\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              children: \"S\\u1EA3n Ph\\u1EA9m *\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 520,\n              columnNumber: 37\n            }, this), formData.items.map((item, index) => {\n              const selectedProduct = products.find(p => p.ma_sp === item.ma_sp);\n              const currentPrice = selectedProduct ? parseInt(selectedProduct.gia_ban) : 0;\n              const availableStock = (selectedProduct === null || selectedProduct === void 0 ? void 0 : selectedProduct.so_luong_ton) || 0;\n              return /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"product-item-row\",\n                children: [/*#__PURE__*/_jsxDEV(\"select\", {\n                  required: true,\n                  value: item.ma_sp,\n                  onChange: e => updateProductItem(index, 'ma_sp', e.target.value),\n                  style: {\n                    flex: 3\n                  },\n                  children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                    value: \"\",\n                    children: \"Ch\\u1ECDn s\\u1EA3n ph\\u1EA9m\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 534,\n                    columnNumber: 53\n                  }, this), products.map(product => /*#__PURE__*/_jsxDEV(\"option\", {\n                    value: product.ma_sp,\n                    disabled: product.so_luong_ton <= 0,\n                    children: [product.ten_sp, \" (T\\u1ED3n: \", product.so_luong_ton, \" - Gi\\xE1: \", parseInt(product.gia_ban).toLocaleString('vi-VN'), \" \\u0111)\"]\n                  }, product.ma_sp, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 536,\n                    columnNumber: 57\n                  }, this))]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 528,\n                  columnNumber: 49\n                }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                  type: \"number\",\n                  required: true,\n                  min: \"1\",\n                  max: availableStock,\n                  value: item.so_luong,\n                  onChange: e => updateProductItem(index, 'so_luong', e.target.value),\n                  placeholder: \"SL\",\n                  style: {\n                    flex: 1.5\n                  },\n                  disabled: !item.ma_sp\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 541,\n                  columnNumber: 49\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"item-sub-info\",\n                  style: {\n                    flex: 2\n                  },\n                  children: item.ma_sp ? `${(currentPrice * item.so_luong).toLocaleString('vi-VN')} đ` : 'Chọn SP'\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 552,\n                  columnNumber: 49\n                }, this), formData.items.length > 1 && /*#__PURE__*/_jsxDEV(\"button\", {\n                  type: \"button\",\n                  className: \"btn btn-danger btn-sm\",\n                  onClick: () => removeProductItem(index),\n                  title: \"H\\u1EE7y \\u0111\\u01A1n h\\xE0ng v\\xE0 ho\\xE0n l\\u1EA1i t\\u1ED3n kho\",\n                  style: {\n                    marginLeft: '0.5rem'\n                  },\n                  children: \"X\\xF3a\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 556,\n                  columnNumber: 53\n                }, this)]\n              }, index, true, {\n                fileName: _jsxFileName,\n                lineNumber: 527,\n                columnNumber: 45\n              }, this);\n            }), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"add-product-row\",\n              children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                type: \"button\",\n                className: \"btn btn-secondary\",\n                onClick: addProductItem,\n                children: \"+ Th\\xEAm S\\u1EA3n Ph\\u1EA9m\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 570,\n                columnNumber: 41\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"total-amount-display\",\n                children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                  children: \"T\\u1ED5ng ti\\u1EC1n t\\u1EA1m t\\xEDnh:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 578,\n                  columnNumber: 45\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  style: {\n                    color: '#e74c3c',\n                    marginLeft: '10px'\n                  },\n                  children: [totalAmount.toLocaleString('vi-VN'), \" \\u0111\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 579,\n                  columnNumber: 45\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 577,\n                columnNumber: 41\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 569,\n              columnNumber: 37\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 519,\n            columnNumber: 33\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"modal-footer\",\n            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n              type: \"button\",\n              className: \"btn btn-secondary\",\n              onClick: handleCloseModal,\n              children: \"H\\u1EE7y\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 585,\n              columnNumber: 37\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              type: \"submit\",\n              className: \"btn btn-primary-modal\",\n              children: \"T\\u1EA1o \\u0110\\u01A1n H\\xE0ng\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 588,\n              columnNumber: 37\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 584,\n            columnNumber: 33\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 502,\n          columnNumber: 29\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 450,\n        columnNumber: 21\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 449,\n      columnNumber: 17\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 310,\n    columnNumber: 9\n  }, this);\n};\n_s(Orders, \"DJv6OMBfNJqlEin2Pen7ITjaL7A=\");\n_c2 = Orders;\nexport default Orders;\nvar _c, _c2;\n$RefreshReg$(_c, \"LoadingSpinner\");\n$RefreshReg$(_c2, \"Orders\");","map":{"version":3,"names":["React","useState","useEffect","useMemo","orderAPI","customerAPI","productAPI","jsxDEV","_jsxDEV","LoadingSpinner","className","style","textAlign","padding","children","fileName","_jsxFileName","lineNumber","columnNumber","_c","Orders","_s","_orderDetails$items","orders","setOrders","customers","setCustomers","products","setProducts","loading","setLoading","currentKeyword","setCurrentKeyword","filterStatus","setFilterStatus","filterStartDate","setFilterStartDate","filterEndDate","setFilterEndDate","showModal","setShowModal","orderDetails","setOrderDetails","formData","setFormData","ma_kh","items","ma_sp","so_luong","trang_thai","alert","setAlert","type","message","loadData","Promise","all","loadOrders","loadCustomers","loadProducts","error","console","showAlert","handleApplyFilter","params","keyword","status","startDate","endDate","handleResetFilter","response","getAll","data","success","filter","p","setTimeout","handleOpenModal","handleCloseModal","handleViewDetails","order","getById","ma_dh","addProductItem","removeProductItem","index","newItems","_","i","updateProductItem","field","value","numValue","parseInt","handleSubmit","e","preventDefault","validItems","item","length","dataToSubmit","create","_error$response","_error$response$data","handleCancelOrder","window","confirm","cancel","_error$response2","_error$response2$data","handleCompleteOrder","complete","_error$response3","_error$response3$data","handleStatusChange","newStatus","_error$response4","_error$response4$data","getCustomerName","customer","find","c","ho_ten","getStatusBadge","normalizedStatus","trim","totalAmount","reduce","total","product","price","gia_ban","onClick","placeholder","onChange","target","width","title","marginLeft","colSpan","map","ten_khach_hang","Date","ngay_mua","toLocaleString","tong_so_luong","item_count","tong_tien","stopPropagation","marginBottom","marginTop","color","ten_sp","don_gia","thanh_tien","fontWeight","fontSize","onSubmit","required","selectedProduct","currentPrice","availableStock","so_luong_ton","flex","disabled","min","max","_c2","$RefreshReg$"],"sources":["D:/BTL_WEB_1/BTLCK/BTLCK/frontend/src/pages/Orders.js"],"sourcesContent":["import React, { useState, useEffect, useMemo } from 'react';\r\nimport { orderAPI, customerAPI, productAPI } from '../services/api';\r\nimport './Orders.css';\r\n\r\n// hiển thị  khi loading\r\nconst LoadingSpinner = () => (\r\n    <div className=\"spinner-container\" style={{ textAlign: 'center', padding: '50px' }}>\r\n        <div className=\"spinner\">Đang tải...</div>\r\n    </div>\r\n);\r\n\r\nconst Orders = () => {\r\n    const [orders, setOrders] = useState([]);\r\n    const [customers, setCustomers] = useState([]);\r\n    const [products, setProducts] = useState([]);\r\n    const [loading, setLoading] = useState(true);\r\n    const [currentKeyword, setCurrentKeyword] = useState(''); \r\n    const [filterStatus, setFilterStatus] = useState('');    \r\n    const [filterStartDate, setFilterStartDate] = useState(''); \r\n    const [filterEndDate, setFilterEndDate] = useState('');     \r\n    \r\n    const [showModal, setShowModal] = useState(false);\r\n    const [orderDetails, setOrderDetails] = useState(null);\r\n    const [formData, setFormData] = useState({\r\n        ma_kh: '',\r\n        items: [{ ma_sp: '', so_luong: 1 }],\r\n        trang_thai: 'Chờ xử lý', \r\n    });\r\n    const [alert, setAlert] = useState({ type: '', message: '' });\r\n\r\n    //  Load Data \r\n    const loadData = async () => {\r\n        setLoading(true);\r\n        try {\r\n            await Promise.all([\r\n                loadOrders({}), \r\n                loadCustomers(), \r\n                loadProducts()\r\n            ]);\r\n        } catch (error) {\r\n            console.error('Lỗi khi tải dữ liệu ban đầu:', error);\r\n            showAlert('error', 'Lỗi khi tải dữ liệu ban đầu.');\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    useEffect(() => {\r\n        loadData();\r\n   \r\n    }, []);\r\n   \r\n//  LỌC KHI NHẤN NÚT\r\n    const handleApplyFilter = async () => {\r\n        setLoading(true);\r\n        const params = {\r\n            keyword: currentKeyword,\r\n            status: filterStatus,\r\n            startDate: filterStartDate,\r\n            endDate: filterEndDate,\r\n        };\r\n        await loadOrders(params);\r\n        setLoading(false);\r\n    };\r\n    \r\n    const handleResetFilter = async () => {\r\n        setLoading(true);\r\n        setCurrentKeyword('');\r\n        setFilterStatus('');\r\n        setFilterStartDate('');\r\n        setFilterEndDate('');\r\n        await loadOrders({});\r\n        setLoading(false);\r\n    };\r\n    const loadOrders = async (params = {}) => {\r\n        try {\r\n            \r\n            const response = await orderAPI.getAll(params);\r\n            if (response.data.success) {\r\n                setOrders(response.data.data);\r\n            }\r\n        } catch (error) {\r\n            showAlert('error', 'Lỗi khi tải danh sách đơn hàng');\r\n        }\r\n    };\r\n\r\n    const loadCustomers = async () => {\r\n        try {\r\n            const response = await customerAPI.getAll();\r\n            if (response.data.success) {\r\n                setCustomers(response.data.data);\r\n            }\r\n        } catch (error) {\r\n            console.error('Error loading customers:', error);\r\n        }\r\n    };\r\n\r\n    const loadProducts = async () => {\r\n        try {\r\n            // Lọc sản phẩm đang hoạt động/có sẵn\r\n            const response = await productAPI.getAll('', false); \r\n            if (response.data.success) {\r\n                setProducts(response.data.data.filter(p => p.trang_thai === 1));\r\n            }\r\n        } catch (error) {\r\n            console.error('Error loading products:', error);\r\n        }\r\n    };\r\n\r\n    const showAlert = (type, message) => {\r\n        setAlert({ type, message });\r\n        setTimeout(() => setAlert({ type: '', message: '' }), 3000);\r\n    };\r\n\r\n    //  Modal & Form Logic \r\n\r\n    const handleOpenModal = () => {\r\n        \r\n        setFormData({\r\n            ma_kh: '',\r\n            items: [{ ma_sp: '', so_luong: 1 }],\r\n            trang_thai: 'Chờ xử lý',\r\n        });\r\n        setOrderDetails(null); \r\n        setShowModal(true);\r\n    };\r\n\r\n    const handleCloseModal = () => {\r\n        setShowModal(false);\r\n        setOrderDetails(null);\r\n        setFormData({ ma_kh: '', items: [{ ma_sp: '', so_luong: 1 }], trang_thai: 'Chờ xử lý' });\r\n    };\r\n\r\n    const handleViewDetails = async (order) => {\r\n        try {\r\n            const response = await orderAPI.getById(order.ma_dh);\r\n            if (response.data.success) {\r\n                setOrderDetails(response.data.data);\r\n                setShowModal(true);\r\n            }\r\n        } catch (error) {\r\n            showAlert('error', 'Lỗi khi tải chi tiết đơn hàng');\r\n        }\r\n    };\r\n\r\n    //  Product Item Logic \r\n\r\n    const addProductItem = () => {\r\n        setFormData({\r\n            ...formData,\r\n            items: [...formData.items, { ma_sp: '', so_luong: 1 }],\r\n        });\r\n    };\r\n\r\n    const removeProductItem = (index) => {\r\n        const newItems = formData.items.filter((_, i) => i !== index);\r\n        setFormData({ ...formData, items: newItems });\r\n    };\r\n\r\n    const updateProductItem = (index, field, value) => {\r\n        const newItems = [...formData.items];\r\n        \r\n        // Chuyển đổi số lượng sang int\r\n        if (field === 'so_luong') {\r\n            const numValue = parseInt(value);\r\n            newItems[index][field] = numValue < 1 ? 1 : numValue;\r\n        } else {\r\n            newItems[index][field] = value;\r\n        }\r\n\r\n        setFormData({ ...formData, items: newItems });\r\n    };\r\n\r\n    //  Submit & Delete \r\n\r\n    const handleSubmit = async (e) => {\r\n        e.preventDefault();\r\n        \r\n        // Validate\r\n        if (!formData.ma_kh) {\r\n            showAlert('error', 'Vui lòng chọn khách hàng.');\r\n            return;\r\n        }\r\n\r\n        const validItems = formData.items.filter(item => item.ma_sp && item.so_luong > 0);\r\n        if (validItems.length === 0) {\r\n            showAlert('error', 'Vui lòng thêm ít nhất một sản phẩm hợp lệ.');\r\n            return;\r\n        }\r\n\r\n        try {\r\n            // Chuẩn bị data, chỉ gửi items hợp lệ\r\n            const dataToSubmit = {\r\n                ...formData,\r\n                items: validItems,\r\n            };\r\n            \r\n            await orderAPI.create(dataToSubmit);\r\n            showAlert('success', 'Tạo đơn hàng thành công!');\r\n            handleCloseModal();\r\n            loadOrders();\r\n        } catch (error) {\r\n            showAlert('error', error.response?.data?.error || 'Có lỗi xảy ra. Vui lòng kiểm tra tồn kho.');\r\n        }\r\n    };\r\n\r\n     // Cancel\r\n    const handleCancelOrder = async (order) => {\r\n   \r\n    if (order.trang_thai === 'Đã hủy' || order.trang_thai === 'Hoàn thành') { // ⭐ SỬA: Bỏ 'Đã giao'\r\n        showAlert('error', `Không thể hủy đơn hàng ${order.ma_dh} vì trạng thái là \"${order.trang_thai}\".`);\r\n        return;\r\n    }\r\n\r\n    if (window.confirm(`Bạn có chắc muốn HỦY đơn hàng ${order.ma_dh}?\\n\\nThao tác này sẽ cập nhật trạng thái đơn hàng và HOÀN LẠI số lượng sản phẩm vào tồn kho.`)) {\r\n        try {\r\n            await orderAPI.cancel(order.ma_dh); \r\n            \r\n            showAlert('success', `Đã hủy đơn hàng #${order.ma_dh} thành công! Tồn kho đã được bù trừ.`);\r\n            loadOrders();\r\n        } catch (error) {\r\n            console.error('Lỗi khi hủy đơn hàng:', error);\r\n            showAlert('error', error.response?.data?.error || 'Lỗi khi hủy đơn hàng. Vui lòng kiểm tra Server.');\r\n        }\r\n    }\r\n};\r\n// ⭐ (Completed)\r\nconst handleCompleteOrder = async (order) => {\r\n    if (order.trang_thai === 'Đã hủy' || order.trang_thai === 'Hoàn thành') {\r\n        showAlert('error', `Không thể hoàn thành đơn hàng ${order.ma_dh} vì trạng thái là \"${order.trang_thai}\".`);\r\n        return;\r\n    }\r\n\r\n    if (window.confirm(`Bạn có chắc muốn HOÀN THÀNH đơn hàng ${order.ma_dh}?\\n\\nThao tác này sẽ xác nhận đơn hàng đã được giao.`)) {\r\n        try {\r\n         \r\n            await orderAPI.complete(order.ma_dh); \r\n            \r\n            showAlert('success', `Đơn hàng #${order.ma_dh} đã được chuyển sang trạng thái Hoàn thành!`);\r\n            loadOrders();\r\n        } catch (error) {\r\n            console.error('Lỗi khi hoàn thành đơn hàng:', error);\r\n            showAlert('error', error.response?.data?.error || 'Lỗi khi hoàn thành đơn hàng. Vui lòng kiểm tra Server.');\r\n        }\r\n    }\r\n};\r\n// ⭐ HÀM MỚI: Xử lý thay đổi trạng thái từ Dropdown\r\nconst handleStatusChange = async (order, newStatus) => {\r\n    // Tránh cập nhật nếu trạng thái không thay đổi\r\n    if (order.trang_thai === newStatus) return;\r\n\r\n    // Xác nhận và xử lý theo trạng thái mới\r\n    if (newStatus === 'Hoàn thành') {\r\n        handleCompleteOrder(order);\r\n    } else if (newStatus === 'Đã hủy') {\r\n        handleCancelOrder(order);\r\n    } else if (newStatus === 'Chờ xử lý' && order.trang_thai !== 'Chờ xử lý') {\r\n        // Nếu muốn chuyển lại về \"Chờ xử lý\" (Cần logic API tương ứng trên server)\r\n        if (window.confirm(`Bạn có chắc muốn chuyển đơn hàng #${order.ma_dh} về trạng thái \"Chờ xử lý\" không?`)) {\r\n            try {\r\n                // Giả định API của bạn có endpoint để chuyển trạng thái về \"Chờ xử lý\"\r\n                // await orderAPI.updateStatus(order.ma_dh, newStatus); \r\n                showAlert('success', `Đơn hàng #${order.ma_dh} đã được chuyển về trạng thái Chờ xử lý!`);\r\n                loadOrders(); \r\n            } catch (error) {\r\n                showAlert('error', error.response?.data?.error || 'Lỗi khi cập nhật trạng thái.');\r\n            }\r\n        }\r\n    }\r\n};\r\n    // Utility Functions \r\n\r\n    const getCustomerName = (ma_kh) => {\r\n        const customer = customers.find(c => c.ma_kh === ma_kh);\r\n        return customer ? customer.ho_ten : `(Mã KH: ${ma_kh})`;\r\n    };\r\n    \r\n    //  Badge trạng thái\r\nconst getStatusBadge = (trang_thai) => {\r\n    // Đảm bảo trạng thái luôn là chuỗi và chuẩn hóa\r\n    const normalizedStatus = (trang_thai || 'Chờ xử lý').trim(); \r\n    \r\n    switch (normalizedStatus) {\r\n        case 'Hoàn thành':\r\n            return <span className=\"badge badge-success\">{normalizedStatus}</span>;\r\n        case 'Chờ xử lý':\r\n            return <span className=\"badge badge-warning\">{normalizedStatus}</span>;\r\n        case 'Đã hủy':\r\n            return <span className=\"badge badge-danger\">{normalizedStatus}</span>;\r\n        default:\r\n            return <span className=\"badge badge-info\">Chờ xử lý</span>;\r\n    }\r\n};\r\n    \r\n    // Tính toán tổng tiền tạm thời cho form tạo đơn hàng \r\n    const totalAmount = useMemo(() => {\r\n        return formData.items.reduce((total, item) => {\r\n            const product = products.find(p => p.ma_sp === item.ma_sp);\r\n            const price = product ? parseInt(product.gia_ban) : 0;\r\n            return total + (price * item.so_luong);\r\n        }, 0);\r\n    }, [formData.items, products]);\r\n\r\n    //  Render \r\n    if (loading) {\r\n        return <LoadingSpinner />;\r\n    }\r\n\r\n    return (\r\n        <div className=\"orders-page\">\r\n            <div className=\"card\">\r\n                <div className=\"card-header\">\r\n                    <h2>🛒 Quản Lý Đơn Hàng</h2>\r\n                    <button className=\"btn btn-primary\" onClick={handleOpenModal}>\r\n                        + Tạo Đơn Hàng Mới\r\n                    </button>\r\n                </div>\r\n\r\n                {alert.message && (\r\n                    <div className={`alert alert-${alert.type}`}>\r\n                        {alert.message}\r\n                    </div>\r\n                )}\r\n\r\n<div className=\"filter-bar order-filter-bar\">\r\n                    <input\r\n                        type=\"text\"\r\n                        placeholder=\"Tìm kiếm theo mã, khách hàng...\"\r\n                        value={currentKeyword}\r\n                        onChange={(e) => setCurrentKeyword(e.target.value)} \r\n                        className=\"form-control search-input\"\r\n                    />\r\n                    \r\n                    {/* Bộ lọc theo Trạng thái */}\r\n                    <select\r\n                        value={filterStatus}\r\n                        onChange={(e) => setFilterStatus(e.target.value)}\r\n                        className=\"form-control filter-select\"\r\n                        style={{ width: '150px' }}\r\n                    >\r\n                        <option value=\"\">-- Trạng thái --</option>\r\n                        <option value=\"Chờ xử lý\">Chờ xử lý</option>\r\n                        <option value=\"Hoàn thành\">Hoàn thành</option>\r\n                        <option value=\"Đã hủy\">Đã hủy</option>\r\n                    </select>\r\n                    \r\n                    {/* Bộ lọc theo Ngày mua */}\r\n                    <input\r\n                        type=\"date\"\r\n                        value={filterStartDate}\r\n                        onChange={(e) => setFilterStartDate(e.target.value)}\r\n                        className=\"form-control filter-date\"\r\n                        title=\"Ngày bắt đầu\"\r\n                    />\r\n                    <input\r\n                        type=\"date\"\r\n                        value={filterEndDate}\r\n                        onChange={(e) => setFilterEndDate(e.target.value)}\r\n                        className=\"form-control filter-date\"\r\n                        title=\"Ngày kết thúc\"\r\n                    />\r\n\r\n                    <button className=\"btn btn-primary\" onClick={handleApplyFilter} style={{ marginLeft: '10px' }}>\r\n                        🔎 Lọc\r\n                    </button>\r\n                    <button className=\"btn btn-secondary\" onClick={handleResetFilter} style={{ marginLeft: '10px' }}>\r\n                        🔄 Reset\r\n                    </button>\r\n                </div>\r\n\r\n                <div className=\"table-container\">\r\n                    <table>\r\n                        <thead>\r\n                            <tr>\r\n                                <th>Mã ĐH</th>\r\n                                <th>Khách Hàng</th>\r\n                                <th>Thời Gian</th>\r\n                                <th>Số Lượng SP</th>\r\n                                <th>Tổng Tiền</th>\r\n                                <th>Trạng Thái</th>\r\n                                <th>Thao Tác</th>\r\n                            </tr>\r\n                        </thead>\r\n                        <tbody>\r\n                            {orders.length === 0 ? (\r\n                                <tr>\r\n                                    <td colSpan=\"7\" style={{ textAlign: 'center', padding: '2rem' }}>\r\n                                        Không có đơn hàng nào\r\n                                    </td>\r\n                                </tr>\r\n                            ) : (orders.map((order) => (\r\n                                    <tr key={order.ma_dh}>\r\n                                        \r\n                                        <td>{order.ma_dh}</td> \r\n                                        {/* 2. KHÁCH HÀNG */}\r\n                                        <td>{order.ten_khach_hang || getCustomerName(order.ma_kh)}</td>\r\n                                        {/* 3. THỜI GIAN */}\r\n                                        <td>{new Date(order.ngay_mua).toLocaleString('vi-VN')}</td>\r\n                                        {/* 4. SỐ LƯỢNG SP */}\r\n                                        <td>{order.tong_so_luong || order.item_count || 0}</td>\r\n                                        {/* 5. TỔNG TIỀN */}\r\n                                        <td>{parseInt(order.tong_tien || 0).toLocaleString('vi-VN')} đ</td>\r\n                                        {/* 6. TRẠNG THÁI */}\r\n                                        <td>\r\n                                            {getStatusBadge(order.trang_thai)}\r\n                                        </td>\r\n                                        {/* 7. THAO TÁC (Đã thêm nút Hoàn thành và Hủy) */}\r\n                                        <td>\r\n                                            <div className=\"action-buttons\">\r\n                                                <button\r\n                                                    className=\"btn btn-secondary btn-sm\"\r\n                                                    onClick={() => handleViewDetails(order)}\r\n                                                >\r\n                                                    Chi Tiết\r\n                                                </button>\r\n                                                {/* NÚT HOÀN THÀNH */}\r\n                                                {order.trang_thai === 'Chờ xử lý' && (\r\n                                                    <button\r\n                                                        className=\"btn btn-success btn-sm\"\r\n                                                        onClick={() => handleCompleteOrder(order)}\r\n\r\n                                                    >\r\n                                                        Hoàn thành\r\n                                                    </button>\r\n                                                )}\r\n\r\n                                                {/* NÚT HỦY */}\r\n                                                {order.trang_thai === 'Chờ xử lý' && (\r\n                                                    <button\r\n                                                        className=\"btn btn-danger btn-sm\"\r\n                                                        onClick={() => handleCancelOrder(order)}\r\n                                                       \r\n                                                    >\r\n                                                        Hủy\r\n                                                    </button>\r\n                                                )}\r\n                                            </div>\r\n                                        </td>\r\n                                    </tr>\r\n                                ))\r\n                            )}\r\n                        </tbody>\r\n                    </table>\r\n                </div>\r\n            </div>\r\n\r\n            {/*  Modal  */}\r\n            {showModal && (\r\n                <div className=\"modal-overlay\" onClick={handleCloseModal}>\r\n                    <div className={`modal ${orderDetails ? 'modal-details' : 'modal-form'}`} onClick={(e) => e.stopPropagation()}> \r\n                        <div className=\"modal-header\">\r\n                            <h3>{orderDetails ? `Chi Tiết Đơn Hàng #${orderDetails.ma_dh}` : 'Tạo Đơn Hàng Mới'}</h3>\r\n                            <button className=\"close-btn\" onClick={handleCloseModal}>×</button>\r\n                        </div>\r\n\r\n                        {orderDetails ? (\r\n                            // Render Chi Tiết Đơn Hàng\r\n                            <div className=\"order-details\">\r\n                                <p className=\"detail-row\"><strong>Khách Hàng:</strong> {getCustomerName(orderDetails.ma_kh)}</p>\r\n                                <p className=\"detail-row\"><strong>Thời Gian:</strong> {new Date(orderDetails.ngay_mua).toLocaleString('vi-VN')}</p>\r\n                                <p className=\"detail-row\"><strong>Trạng Thái:</strong> {getStatusBadge(orderDetails.trang_thai)}</p>\r\n                                \r\n                                <div className=\"detail-section table-container\">\r\n                                    <h4 style={{ marginBottom: '1rem', marginTop: '1rem', color: '#457b9d' }}>Danh Sách Sản Phẩm</h4>\r\n                                    <table>\r\n                                        <thead>\r\n                                            <tr>\r\n                                                <th>Sản Phẩm</th>\r\n                                                <th style={{ width: '100px' }}>Số Lượng</th>\r\n                                                <th>Đơn Giá</th>\r\n                                                <th>Thành Tiền</th>\r\n                                            </tr>\r\n                                        </thead>\r\n                                        <tbody>\r\n                                            {orderDetails.items?.map((item, index) => (\r\n                                                <tr key={index}>\r\n                                                    <td>{item.ten_sp || item.ma_sp}</td>\r\n                                                    <td style={{ textAlign: 'center' }}>{item.so_luong}</td>\r\n                                                    <td>{parseInt(item.don_gia).toLocaleString('vi-VN')} đ</td>\r\n                                                    <td>{parseInt(item.thanh_tien).toLocaleString('vi-VN')} đ</td>\r\n                                                </tr>\r\n                                            ))}\r\n                                        </tbody>\r\n                                        <tfoot>\r\n                                            <tr>\r\n                                                <td colSpan=\"3\" style={{ textAlign: 'right', fontWeight: 'bold' }}>Tổng Tiền:</td>\r\n                                                <td style={{ fontWeight: 'bold', fontSize: '1.1rem' }}>\r\n                                                    {parseInt(orderDetails.tong_tien).toLocaleString('vi-VN')} đ\r\n                                                </td>\r\n                                            </tr>\r\n                                        </tfoot>\r\n                                    </table>\r\n                                </div>\r\n                                <div className=\"modal-footer\">\r\n                                    <button type=\"button\" className=\"btn btn-secondary\" onClick={handleCloseModal}>\r\n                                        Đóng\r\n                                    </button>\r\n                                </div>\r\n                            </div>\r\n                        ) : (\r\n                            // Render Form Tạo Mới\r\n                            <form onSubmit={handleSubmit}>\r\n                                <div className=\"form-group\">\r\n                                    <label>Khách Hàng *</label>\r\n                                    <select\r\n                                        required\r\n                                        value={formData.ma_kh}\r\n                                        onChange={(e) => setFormData({ ...formData, ma_kh: e.target.value })}\r\n                                    >\r\n                                        <option value=\"\">-- Chọn khách hàng --</option>\r\n                                        {customers.map((customer) => (\r\n                                            <option key={customer.ma_kh} value={customer.ma_kh}>\r\n                                                {customer.ho_ten}\r\n                                            </option>\r\n                                        ))}\r\n                                    </select>\r\n                                </div>\r\n\r\n                                <div className=\"form-group product-list-group\">\r\n                                    <label>Sản Phẩm *</label>\r\n                                    {formData.items.map((item, index) => {\r\n                                        const selectedProduct = products.find(p => p.ma_sp === item.ma_sp);\r\n                                        const currentPrice = selectedProduct ? parseInt(selectedProduct.gia_ban) : 0;\r\n                                        const availableStock = selectedProduct?.so_luong_ton || 0;\r\n                                        \r\n                                        return (\r\n                                            <div key={index} className=\"product-item-row\">\r\n                                                <select\r\n                                                    required\r\n                                                    value={item.ma_sp}\r\n                                                    onChange={(e) => updateProductItem(index, 'ma_sp', e.target.value)}\r\n                                                    style={{ flex: 3 }}\r\n                                                >\r\n                                                    <option value=\"\">Chọn sản phẩm</option>\r\n                                                    {products.map((product) => (\r\n                                                        <option key={product.ma_sp} value={product.ma_sp} disabled={product.so_luong_ton <= 0}>\r\n                                                            {product.ten_sp} (Tồn: {product.so_luong_ton} - Giá: {parseInt(product.gia_ban).toLocaleString('vi-VN')} đ)\r\n                                                        </option>\r\n                                                    ))}\r\n                                                </select>\r\n                                                <input\r\n                                                    type=\"number\"\r\n                                                    required\r\n                                                    min=\"1\"\r\n                                                    max={availableStock}\r\n                                                    value={item.so_luong}\r\n                                                    onChange={(e) => updateProductItem(index, 'so_luong', e.target.value)}\r\n                                                    placeholder=\"SL\"\r\n                                                    style={{ flex: 1.5 }}\r\n                                                    disabled={!item.ma_sp}\r\n                                                />\r\n                                                <span className=\"item-sub-info\" style={{ flex: 2 }}>\r\n                                                    {item.ma_sp ? `${(currentPrice * item.so_luong).toLocaleString('vi-VN')} đ` : 'Chọn SP'}\r\n                                                </span>\r\n                                                {formData.items.length > 1 && (\r\n                                                    <button\r\n                                                        type=\"button\"\r\n                                                        className=\"btn btn-danger btn-sm\"\r\n                                                        onClick={() => removeProductItem(index)}\r\n                                                        title=\"Hủy đơn hàng và hoàn lại tồn kho\"\r\n                                                        style={{ marginLeft: '0.5rem' }}\r\n                                                    >\r\n                                                        Xóa\r\n                                                    </button>\r\n                                                )}\r\n                                            </div>\r\n                                        );\r\n                                    })}\r\n                                    <div className=\"add-product-row\">\r\n                                        <button\r\n                                            type=\"button\"\r\n                                            className=\"btn btn-secondary\"\r\n                                            onClick={addProductItem}\r\n                                        >\r\n                                            + Thêm Sản Phẩm\r\n                                        </button>\r\n                                        <div className=\"total-amount-display\">\r\n                                            <strong>Tổng tiền tạm tính:</strong> \r\n                                            <span style={{ color: '#e74c3c', marginLeft: '10px' }}>{totalAmount.toLocaleString('vi-VN')} đ</span>\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n\r\n                                <div className=\"modal-footer\">\r\n                                    <button type=\"button\" className=\"btn btn-secondary\" onClick={handleCloseModal}>\r\n                                        Hủy\r\n                                    </button>\r\n                                    <button type=\"submit\" className=\"btn btn-primary-modal\">\r\n                                        Tạo Đơn Hàng\r\n                                    </button>\r\n                                </div>\r\n                            </form>\r\n                        )}\r\n                    </div>\r\n                </div>\r\n            )}\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default Orders;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}